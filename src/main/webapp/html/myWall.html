<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>我的空间</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
<h2>我的空间</h2>
<a href="wall.html">征友墙</a>
<table border="1" width="90%" cellspacing="0" cellpadding="0">
    <h3>我发的帖子</h3>
    <hr>
    <thead>
    <tr>
        <th>帖名</th>
        <th>内容</th>
        <th>发帖时间</th>
    </tr>
    </thead>
    <tbody id="tBody" align="center"></tbody>
</table>
</body>

<script>
    // 页面加载完成后，返回一页卡片
    window.onload = getOnePageMyCards;

    function getOnePageMyCards() {
        let stuId = "M202271503";
        let page = 1;
        axios.get("http://localhost/cards/" + stuId + "/" + page).
        then(function (resp) {
            // 返回卡片对象数组
            let cards = resp.data.data;
            let htmlStr = ""; // 通过字符拼接写一个HTML表格
            for(let i = 0;i < cards.length;i++) {
                let card = cards[i];
                htmlStr += "<tr>";
                htmlStr += "<td>" + card.title + "</td>";
                htmlStr += "<td>" + card.content + "</td>";
                // 将时间戳转换为日期格式
                let date = new Date(card.createTime);
                Y = date.getFullYear() + '-';
                M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';
                D = date.getDate() + ' ';
                h = date.getHours() + ':';
                m = date.getMinutes() + ':';
                s = date.getSeconds();
                let time = Y+M+D+h+m+s;
                htmlStr += "<td>" + time + "</td>";
                htmlStr += "</tr>";
            }
            //将拼接的字符串放进tbody里
            document.getElementById("tBody").innerHTML = htmlStr;
        });
    }
</script>
</html>